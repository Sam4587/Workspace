---
name: "development-workflow"
description: "标准化团队开发流程，确保每个项目遵循统一的规划、编码、测试和文档规范。当开始新功能开发、项目初始化或需要规范化开发流程时调用。"
---

# 团队标准化开发流程

本 Skill 定义了一套完整的开发工作流，借鉴 everything-claude-code 项目的成功经验，确保团队开发效率和代码质量。

## 核心理念

1. **先规划后编码** - 任何功能开发前必须完成需求分析和设计
2. **文档驱动** - 每个功能必须有对应的需求文档和设计文档
3. **测试先行** - 核心功能必须包含测试用例
4. **持续集成** - 代码提交前必须通过 lint 和基础测试

## 开发流程五阶段

### 阶段一：需求分析 (Planning)

**触发条件**：接到新功能需求或任务时

**必须完成的工作**：
1. 在 `.monkeycode/specs/<feature-name>/` 目录创建需求文档
2. 使用以下模板创建 `requirements.md`：

```markdown
# [功能名称] 需求文档

## 需求概述
- 背景：[为什么需要这个功能]
- 目标：[期望达成的效果]
- 范围：[包含和不包含的内容]

## 功能需求
### 1. [功能模块名]
**需求 ID**: [前缀-序号，如 AUTH-001]
**需求描述**: [具体描述]
**验收标准**:
1. WHEN [条件] THEN [结果]
2. WHEN [条件] THEN [结果]

## 非功能需求
- 性能：[响应时间、并发要求]
- 安全：[认证、授权、数据保护]
- 兼容性：[浏览器、设备支持]

## 依赖关系
- 前置依赖：[需要提前完成的功能]
- 后置影响：[会影响的其他功能]
```

**检查清单**：
- [ ] 需求文档已创建
- [ ] 每个需求都有明确的验收标准
- [ ] 依赖关系已梳理清楚

### 阶段二：技术设计 (Design)

**触发条件**：需求文档完成后

**必须完成的工作**：
1. 在同目录创建 `design.md` 技术设计文档
2. 包含以下章节：

```markdown
# [功能名称] 技术设计文档

## 架构设计
[架构图或文字描述]

## 模块划分
### 1. [模块名]
**职责**: [该模块负责什么]
**接口**: [对外提供的接口]
**依赖**: [依赖的其他模块]

## 数据模型
[数据库表结构、API 数据结构]

## 接口设计
| 接口 | 方法 | 参数 | 返回值 | 说明 |
|-----|------|------|--------|------|

## 错误处理
[错误码定义、异常处理策略]

## 安全考虑
[认证、授权、输入验证等]
```

**检查清单**：
- [ ] 设计文档已创建
- [ ] 接口定义清晰
- [ ] 错误处理策略已定义

### 阶段三：任务拆解 (Task Breakdown)

**触发条件**：设计文档完成后

**必须完成的工作**：
1. 创建 `tasklist.md` 任务清单
2. 使用以下格式：

```markdown
# [功能名称] 开发任务清单

## 阶段 1: 基础设施
- [ ] [任务1描述] - [预估工时]
- [ ] [任务2描述] - [预估工时]

## 阶段 2: 核心功能
- [ ] [任务3描述] - [预估工时]

## 阶段 3: 测试与优化
- [ ] [任务4描述] - [预估工时]

## 依赖项
- [依赖1]: [状态]
```

**检查清单**：
- [ ] 任务清单已创建
- [ ] 每个任务都有预估工时
- [ ] 任务依赖关系已标注

### 阶段四：编码实现 (Implementation)

**触发条件**：任务清单创建后

**编码规范**：

#### 前端 (React + Vite)
1. **组件结构**：
   ```
   src/components/
   ├── ui/           # shadcn/ui 基础组件
   ├── [feature]/    # 功能组件目录
   └── [Component].jsx
   ```

2. **命名规范**：
   - 组件：PascalCase (如 `UserProfile`)
   - 文件：PascalCase.jsx
   - 函数：camelCase
   - 常量：UPPER_SNAKE_CASE

3. **代码风格**：
   - 使用 ESLint 规则
   - 优先使用函数组件和 Hooks
   - Props 必须定义 PropTypes 或使用 TypeScript

#### 后端 (Node.js + Express)
1. **目录结构**：
   ```
   server/
   ├── routes/       # 路由定义
   ├── services/     # 业务逻辑
   ├── models/       # 数据模型
   ├── middleware/   # 中间件
   └── utils/        # 工具函数
   ```

2. **API 设计**：
   - RESTful 风格
   - 统一返回格式：`{ success: boolean, data: any, message: string }`
   - 错误码规范：4xx 客户端错误，5xx 服务端错误

3. **代码风格**：
   - 使用 async/await 处理异步
   - 统一错误处理中间件
   - 日志使用 Winston

**编码检查清单**：
- [ ] 代码遵循项目 ESLint 规则
- [ ] 关键函数添加了 JSDoc 注释
- [ ] 没有硬编码，配置项放在 config 文件
- [ ] 敏感信息（密钥、密码）未提交到代码库

### 阶段五：测试与验证 (Testing)

**触发条件**：功能编码完成后

**测试要求**：
1. **单元测试**：
   - 核心逻辑必须有单元测试
   - 测试文件：`[module].test.js`

2. **集成测试**：
   - API 接口必须有集成测试
   - 测试文件：`tests/integration.test.js`

3. **手动验证**：
   - 按照需求文档的验收标准逐一验证
   - 边界条件测试

**验证检查清单**：
- [ ] 运行 `npm run lint` 无错误
- [ ] 运行 `npm test` 全部通过
- [ ] 手动验证通过
- [ ] 代码审查通过

## 工作流程图

```
需求分析 → 技术设计 → 任务拆解 → 编码实现 → 测试验证 → 部署上线
   ↑                                                      ↓
   └────────────────── 迭代优化 ←─────────────────────────┘
```

## 常用命令

```bash
# 代码检查
npm run lint

# 运行测试
npm test

# 开发模式启动
npm run dev

# 生产构建
npm run build
```

## 最佳实践

1. **小步快跑**：每个功能拆分为小任务，频繁提交
2. **代码审查**：所有代码必须通过审查才能合并
3. **文档同步**：代码变更时同步更新文档
4. **问题追踪**：遇到技术难题记录在 `.monkeycode/issues/` 目录
