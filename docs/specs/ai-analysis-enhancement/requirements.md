---
title: AI分析模块增强 - 需求文档
category: 功能规格
tags: [AI分析, 视频转写, 知识库, 抖音运营]
created: 2026-02-20
version: v1.0
reference: https://github.com/lid664951-crypto/douyin-creator-toolkit
---

# AI分析模块增强 - 需求文档

## 一、项目背景

### 1.1 参考项目分析

**抖音运营工具箱** (douyin-creator-toolkit) 是一个专注于抖音内容创作的工具，具有以下核心功能：

| 功能 | 说明 | 技术实现 |
|------|------|---------|
| 📹 本地视频批量转写 | 拖入视频一键提取文案，单次最多50个 | sherpa-onnx + SenseVoice |
| 🔗 抖音链接批量提取 | 粘贴抖音分享链接，自动获取视频文案 | dy-mcp（魔塔社区）|
| 🤖 AI深度分析 | 分析视频结构（开头钩子、铺垫、包袱、结尾引导）| 豆包 API / LM Studio |
| 💬 全库AI对话 | 与AI讨论所有视频，总结爆款规律 | RAG + LLM |
| 📚 私有知识库 | 导入行业资料，让AI分析更精准 | 向量数据库 |
| ⚡ GPU加速 | 支持NVIDIA CUDA加速，转写速度翻倍 | CUDA |

### 1.2 我们项目现状

**AI Content Flow** 当前的AI分析能力：

| 功能 | 状态 | 说明 |
|------|------|------|
| 热点话题AI分析 | ✅ 已实现 | 基础的趋势评分、情感分析、建议生成 |
| 内容生成AI | ✅ 已实现 | 支持文章、微头条、视频脚本等 |
| 多AI提供商支持 | ✅ 已实现 | OpenRouter、Groq、DeepSeek、Ollama等 |
| 视频转写 | ✅ 已实现 | 阿里云ASR、Whisper等 |
| 视频结构分析 | ❌ 未实现 | 缺少视频内容结构化分析 |
| 知识库/RAG | ❌ 未实现 | 缺少私有知识库功能 |
| 全库AI对话 | ❌ 未实现 | 缺少与所有内容对话的能力 |

---

## 二、功能差距分析

### 2.1 核心差距

| 功能点 | 抖音运营工具箱 | AI Content Flow | 差距程度 |
|--------|---------------|-----------------|---------|
| 视频转写 | ✅ 本地GPU加速 | ✅ 云端API | 中等 |
| 视频结构分析 | ✅ 开头钩子、铺垫、包袱、结尾 | ❌ 无 | **高** |
| 知识库 | ✅ 私有知识库 | ❌ 无 | **高** |
| 全库对话 | ✅ RAG + LLM | ❌ 无 | **高** |
| 批量处理 | ✅ 单次50个 | ⚠️ 单个处理 | 中等 |
| GPU加速 | ✅ CUDA支持 | ❌ 无本地加速 | 低 |

### 2.2 可借鉴的核心功能

#### 功能一：视频结构化分析

**抖音运营工具箱实现**：
```
视频内容 → AI分析 → 结构化输出
├── 开头钩子（前3秒吸引点）
├── 铺垫内容（背景介绍）
├── 核心包袱（高潮/反转）
└── 结尾引导（互动/关注）
```

**我们需要实现**：
- 视频脚本结构分析
- 内容节奏评估
- 爆款元素识别
- 优化建议生成

#### 功能二：私有知识库

**抖音运营工具箱实现**：
- 导入行业资料（PDF、Word、TXT）
- 向量化存储
- RAG检索增强生成

**我们需要实现**：
- 企业知识库管理
- 文档导入与解析
- 向量数据库集成
- 知识库辅助内容生成

#### 功能三：全库AI对话

**抖音运营工具箱实现**：
- 与所有已分析视频对话
- 总结爆款规律
- 发现内容趋势

**我们需要实现**：
- 与历史内容对话
- 内容效果分析
- 创作规律总结
- 策略建议生成

---

## 三、功能需求

### 3.1 视频结构化分析模块

#### 需求描述
对视频内容进行深度结构分析，识别关键元素，提供优化建议。

#### 功能列表

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|---------|--------|------|
| VSA-001 | 视频结构识别 | P0 | 自动识别开头钩子、铺垫、包袱、结尾引导 |
| VSA-002 | 节奏分析 | P1 | 分析视频节奏，评估观众留存点 |
| VSA-003 | 爆款元素识别 | P1 | 识别可能引发传播的关键元素 |
| VSA-004 | 优化建议 | P0 | 基于分析结果提供改进建议 |
| VSA-005 | 对标分析 | P2 | 与爆款视频对比，找出差距 |

#### 输入输出

**输入**：
- 视频转录文本
- 视频元数据（时长、平台等）
- 可选：参考视频列表

**输出**：
```json
{
  "structure": {
    "hook": { "content": "...", "score": 85, "suggestions": [] },
    "setup": { "content": "...", "score": 70, "suggestions": [] },
    "climax": { "content": "...", "score": 90, "suggestions": [] },
    "cta": { "content": "...", "score": 60, "suggestions": [] }
  },
  "overallScore": 76,
  "viralPotential": "high",
  "suggestions": ["建议加强开头钩子...", "结尾引导可以更明确..."]
}
```

### 3.2 私有知识库模块

#### 需求描述
支持用户导入私有资料，构建专属知识库，辅助AI内容生成。

#### 功能列表

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|---------|--------|------|
| KB-001 | 文档导入 | P0 | 支持PDF、Word、TXT、Markdown导入 |
| KB-002 | 文档解析 | P0 | 自动提取文本、分段、建立索引 |
| KB-003 | 向量存储 | P0 | 文本向量化并存储到向量数据库 |
| KB-004 | 知识检索 | P0 | 基于查询检索相关知识片段 |
| KB-005 | 知识库管理 | P1 | 创建、编辑、删除知识库 |
| KB-006 | 知识关联 | P2 | 自动关联相关知识片段 |

#### 技术选型

| 组件 | 推荐方案 | 备选方案 |
|------|---------|---------|
| 向量数据库 | ChromaDB（本地）| Pinecone（云端）|
| Embedding模型 | text-embedding-3-small | bge-large-zh |
| 文档解析 | pdf-parse + mammoth | LangChain文档加载器 |

### 3.3 全库AI对话模块

#### 需求描述
支持用户与所有历史内容进行对话，发现创作规律，获取策略建议。

#### 功能列表

| 功能ID | 功能名称 | 优先级 | 描述 |
|--------|---------|--------|------|
| CHAT-001 | 内容索引 | P0 | 自动索引所有生成的内容 |
| CHAT-002 | 语义检索 | P0 | 基于问题检索相关内容 |
| CHAT-003 | 对话界面 | P0 | 提供自然语言对话界面 |
| CHAT-004 | 规律总结 | P1 | 自动总结爆款内容规律 |
| CHAT-005 | 策略建议 | P1 | 基于历史数据提供创作策略 |

---

## 四、非功能需求

### 4.1 性能要求

| 指标 | 要求 |
|------|------|
| 视频分析响应时间 | < 30秒 |
| 知识库检索延迟 | < 500ms |
| 对话响应时间 | < 5秒首字 |
| 批量处理能力 | 支持10个并发 |

### 4.2 安全要求

| 要求 | 描述 |
|------|------|
| 数据隔离 | 不同用户知识库完全隔离 |
| 访问控制 | 基于角色的知识库访问权限 |
| 数据加密 | 敏感数据加密存储 |
| 审计日志 | 记录所有知识库操作 |

---

## 五、验收标准

### 5.1 视频结构化分析

- [ ] 能正确识别视频的四个结构部分
- [ ] 分析结果与人工标注一致性 > 80%
- [ ] 能提供有价值的优化建议
- [ ] 处理时间符合性能要求

### 5.2 私有知识库

- [ ] 支持至少3种文档格式导入
- [ ] 知识检索准确率 > 85%
- [ ] 知识库容量支持 > 10000 文档
- [ ] 多用户数据完全隔离

### 5.3 全库AI对话

- [ ] 能准确回答关于历史内容的问题
- [ ] 能总结内容创作规律
- [ ] 对话体验流畅自然
- [ ] 支持多轮对话上下文

---

## 六、参考资料

1. [抖音运营工具箱](https://github.com/lid664951-crypto/douyin-creator-toolkit)
2. [ChromaDB文档](https://www.trychroma.com/)
3. [LangChain RAG教程](https://python.langchain.com/docs/tutorials/rag/)
4. [SenseVoice语音识别](https://github.com/FunAudioLLM/SenseVoice)
