# LiteLLM 多提供商集成 开发任务

## 阶段 1: 基础设施

- [ ] 创建 server/services/llm/ 目录结构 - 5分钟
- [ ] 创建 BaseProvider 基类 - 15分钟
- [ ] 创建提供商注册表 registry.js - 15分钟
- [ ] 配置环境变量模板 - 5分钟

## 阶段 2: 免费提供商适配器

- [ ] 实现 OpenRouter 适配器 - 30分钟
- [ ] 实现 Groq 适配器 - 20分钟
- [ ] 实现 Cerebras 适配器 - 20分钟
- [ ] 实现 Google AI Studio 适配器 - 25分钟
- [ ] 实现 Cohere 适配器 - 20分钟
- [ ] 实现 Cloudflare Workers AI 适配器 - 25分钟

## 阶段 3: 试用额度提供商适配器

- [ ] 实现 Fireworks 适配器 - 20分钟
- [ ] 实现 Hyperbolic 适配器 - 20分钟
- [ ] 实现 Baseten 适配器 - 20分钟

## 阶段 4: 核心功能

- [ ] 实现 LLMGateway 主控制器 - 45分钟
- [ ] 实现路由策略 router.js - 30分钟
- [ ] 实现健康检查 health.js - 25分钟
- [ ] 实现成本追踪 metrics.js - 30分钟

## 阶段 5: API 集成

- [ ] 创建 /api/llm/generate 路由 - 20分钟
- [ ] 创建 /api/llm/providers 路由 - 15分钟
- [ ] 创建 /api/llm/health 路由 - 10分钟
- [ ] 集成到现有内容生成服务 - 30分钟

## 阶段 6: 测试与文档

- [ ] 编写单元测试 - 45分钟
- [ ] 编写集成测试 - 30分钟
- [ ] 更新 API 文档 - 20分钟
- [ ] 创建使用指南 - 20分钟

## 预估工时

总计: **约 10-12 小时**

## 依赖关系

```
阶段1 → 阶段2 → 阶段4
       ↓
      阶段3 → 阶段4
              ↓
             阶段5 → 阶段6
```

## 里程碑

- **里程碑 1**: 基础设施和基类完成
- **里程碑 2**: 至少 3 个免费提供商可用
- **里程碑 3**: LLMGateway 可用，支持自动切换
- **里程碑 4**: API 集成完成，可实际使用
- **里程碑 5**: 测试通过，文档完善

## 优先级建议

1. **P0**: 阶段1 + OpenRouter + Groq（最常用的免费提供商）
2. **P1**: 阶段4 核心功能
3. **P2**: 其他提供商适配器
4. **P3**: 测试与文档
