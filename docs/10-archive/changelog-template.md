# 变更日志模板

> **记录项目的所有重要变更**

**版本**: 1.0.0 | **最后更新**: 2026-02-19

---

## 变更日志格式

本项目遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/) 格式。

### 版本号规范

遵循 [语义化版本 2.0.0](https://semver.org/lang/zh-CN/)：

```
主版本号.次版本号.修订号 (MAJOR.MINOR.PATCH)
```

- **主版本号（MAJOR）**：不兼容的 API 修改
- **次版本号（MINOR）**：向下兼容的功能性新增
- **修订号（PATCH）**：向下兼容的问题修正

### 变更类型

| 类型 | 说明 |
|------|------|
| `Added` | 新增功能 |
| `Changed` | 功能变更 |
| `Deprecated` | 即将废弃的功能 |
| `Removed` | 已移除的功能 |
| `Fixed` | 问题修复 |
| `Security` | 安全相关的修复 |

---

## 模板

```markdown
## [版本号] - YYYY-MM-DD

### Added
- 新增的功能 1
- 新增的功能 2

### Changed
- 变更的功能 1
- 变更的功能 2

### Deprecated
- 即将废弃的功能 1
- 即将废弃的功能 2

### Removed
- 已移除的功能 1
- 已移除的功能 2

### Fixed
- 修复的问题 1
- 修复的问题 2

### Security
- 安全修复 1
- 安全修复 2
```

---

## 示例

## [1.0.0] - 2026-02-19

### Added
- 新增 Ollama 本地部署支持
- 新增 LiteLLM Gateway 多提供商集成
- 新增文档总索引和快速参考指南
- 新增文档标准规范

### Changed
- 重构文档分类体系（10 个分类）
- 统一文档命名和格式规范
- 优化文档检索机制

### Fixed
- 修复 AI 分析功能未对 140 条数据分析的问题
- 修复 OpenRouter API 调用错误

### Security
- 移除硬编码密钥
- 完善 JWT 认证机制
- 添加 API 速率限制

---

## [0.9.0] - 2026-02-18

### Added
- 新增 Remotion 视频生成功能
- 新增视频转录功能
- 新增标题优化功能

### Changed
- 优化热点数据获取流程
- 改进 AI 内容生成质量

### Fixed
- 修复发布队列管理问题
- 修复数据分析可视化错误

---

## 变更记录表

| 版本 | 日期 | 类型 | 说明 | 影响范围 | 负责人 |
|------|------|------|------|----------|--------|
| 1.0.0 | 2026-02-19 | Added | 新增 Ollama 支持 | AI 服务 | AI助手 |
| 1.0.0 | 2026-02-19 | Changed | 重构文档分类体系 | 文档 | AI助手 |
| 1.0.0 | 2026-02-19 | Fixed | 修复 AI 分析问题 | AI 分析 | AI助手 |
| 0.9.0 | 2026-02-18 | Added | 新增视频生成 | 视频创作 | AI助手 |

---

## 发布流程

### 1. 准备发布

- [ ] 更新版本号
- [ ] 更新 CHANGELOG.md
- [ ] 运行所有测试
- [ ] 检查文档完整性
- [ ] 更新相关文档

### 2. 创建发布

- [ ] 创建 Git 标签：`git tag -a v1.0.0 -m "Release version 1.0.0"`
- [ ] 推送标签：`git push origin v1.0.0`
- [ ] 创建 GitHub Release

### 3. 发布后

- [ ] 通知团队成员
- [ ] 更新部署文档
- [ ] 监控系统状态
- [ ] 收集用户反馈

---

## 变更分类

### 按模块分类

| 模块 | 变更类型 | 版本 | 说明 |
|------|----------|------|------|
| 热点监控 | Added | 1.0.0 | 新增数据源 |
| 内容创作 | Changed | 1.0.0 | 优化生成质量 |
| 发布中心 | Fixed | 1.0.0 | 修复发布问题 |
| 数据分析 | Added | 1.0.0 | 新增可视化 |
| 视频创作 | Added | 0.9.0 | 新增视频生成 |
| AI 服务 | Added | 1.0.0 | 新增 Ollama |
| 认证授权 | Security | 1.0.0 | 完善 JWT |
| 系统服务 | Changed | 1.0.0 | 优化性能 |

### 按影响范围分类

| 影响范围 | 变更类型 | 版本 | 说明 |
|----------|----------|------|------|
| 用户界面 | Changed | 1.0.0 | 优化界面 |
| API 接口 | Added | 1.0.0 | 新增端点 |
| 数据库 | Changed | 1.0.0 | 优化查询 |
| 配置文件 | Changed | 1.0.0 | 新增配置项 |
| 文档 | Added | 1.0.0 | 新增文档 |

---

## 版本历史

### 主版本（Major）

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| 1.0.0 | 2026-02-19 | 首次正式发布 |

### 次版本（Minor）

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| 0.9.0 | 2026-02-18 | 新增视频功能 |

### 修订版本（Patch）

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| 0.8.1 | 2026-02-17 | 修复 Bug |
| 0.8.0 | 2026-02-16 | 新增功能 |

---

## 变更统计

### 按类型统计

| 类型 | 数量 | 占比 |
|------|------|------|
| Added | 15 | 30% |
| Changed | 20 | 40% |
| Fixed | 10 | 20% |
| Security | 5 | 10% |
| **总计** | **50** | **100%** |

### 按模块统计

| 模块 | 变更数 | 占比 |
|------|--------|------|
| 热点监控 | 8 | 16% |
| 内容创作 | 10 | 20% |
| 发布中心 | 6 | 12% |
| 数据分析 | 7 | 14% |
| 视频创作 | 5 | 10% |
| AI 服务 | 9 | 18% |
| 认证授权 | 3 | 6% |
| 系统服务 | 2 | 4% |
| **总计** | **50** | **100%** |

---

## 相关文档

- [语义化版本](https://semver.org/lang/zh-CN/)
- [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)
- [发布流程](../07-deployment/release-process.md)
- [版本管理](../02-development/version-control.md)

---

## 最佳实践

### 1. 变更描述

- ✅ 使用清晰的描述
- ✅ 说明变更的原因
- ✅ 列出影响范围
- ❌ 避免模糊的描述
- ❌ 避免技术术语堆砌

### 2. 版本管理

- ✅ 遵循语义化版本规范
- ✅ 及时更新版本号
- ✅ 创建 Git 标签
- ❌ 避免随意更改版本号

### 3. 变更记录

- ✅ 及时记录变更
- ✅ 保持记录完整
- ✅ 定期审查变更
- ❌ 避免遗漏重要变更

---

## 工具和脚本

### 自动化工具

```bash
# 生成变更日志
npm run changelog

# 验证版本号
npm run version:validate

# 创建 Git 标签
npm run tag:create
```

### Git 钩子

```bash
#!/bin/bash
# pre-commit hook

# 检查 CHANGELOG.md 是否更新
if ! git diff --cached --name-only | grep -q "CHANGELOG.md"; then
  echo "错误：请先更新 CHANGELOG.md"
  exit 1
fi
```

---

## 附录

### 附录 A：变更类型详细说明

#### Added
新增的功能、模块、接口等。

#### Changed
现有功能的修改、优化、改进等。

#### Deprecated
即将在未来的版本中移除的功能。

#### Removed
已从当前版本中移除的功能。

#### Fixed
修复的问题、Bug、错误等。

#### Security
安全相关的修复、改进等。

### 附录 B：影响范围说明

| 影响范围 | 说明 |
|----------|------|
| 用户界面 | 前端界面的变更 |
| API 接口 | 后端 API 的变更 |
| 数据库 | 数据库结构的变更 |
| 配置文件 | 配置项的变更 |
| 文档 | 文档的变更 |

---

**文档维护者**: AI 开发团队
**创建时间**: 2026-02-19
**最后更新**: 2026-02-19
**版本**: 1.0
