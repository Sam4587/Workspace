# 个人 IP 变现平台发展规划

## 一、当前项目遗漏分析

### 1.1 架构层面遗漏

| 模块 | 当前状态 | 遗漏内容 | 优先级 |
|------|----------|----------|--------|
| **浏览器自动化** | 仅有框架，无实际实现 | 适配器中 `doPublish` 方法为空，需要集成 rod 浏览器 | 高 |
| **AI 内容创作** | 未实现 | 缺少多 Agent 协作系统 | 高 |
| **视频/图片生成** | 未实现 | 缺少 AI 生成能力集成 | 中 |
| **用户系统** | 未实现 | 缺少登录、权限、配额管理 | 中 |
| **数据持久化** | 仅内存存储 | 缺少数据库支持 | 中 |
| **定时任务** | 未实现 | 缺少定时发布功能 | 低 |

### 1.2 功能层面遗漏

```
当前已实现:          需要补充:
────────────         ────────────
发布器接口 ✓         浏览器自动化实现
异步任务管理 ✓       任务执行器(实际操作浏览器)
文件存储抽象 ✓       云存储集成(阿里云OSS/腾讯COS)
REST API ✓          API 认证和权限
CLI 工具 ✓          更友好的交互界面
```

### 1.3 Toonflow 参考的变动点

我们参考 Toonflow 时需要做以下调整：

| Toonflow 设计 | 我们的调整 | 原因 |
|---------------|-----------|------|
| TypeScript + Express | Go 语言 | 与现有 MCP 工具统一 |
| SQLite 本地数据库 | PostgreSQL/MySQL | 生产环境需要 |
| Electron 桌面应用 | Web 端优先 | SaaS 化更方便 |
| AGPL 协议代码 | 独立实现 | 商业化需求 |
| 多 Agent 协作 | 可简化为单 Agent | 初期降低复杂度 |

---

## 二、分阶段发展路线图

### 阶段一：MVP 最小可用产品（1-2个月）

**目标**：实现核心发布功能，验证市场需求

**技术选型（优先免费）**：

| 组件 | 方案 | 费用 |
|------|------|------|
| 服务器 | 本地开发 / 免费 VPS | 免费 |
| 数据库 | SQLite → PostgreSQL (后期) | 免费 |
| AI 服务 | 通义千问免费额度 / DeepSeek | 免费/低价 |
| 存储 | 本地文件系统 | 免费 |
| 认证 | JWT (无状态) | 免费 |

**核心功能**：

```
┌─────────────────────────────────────────────┐
│              MVP 功能清单                    │
├─────────────────────────────────────────────┤
│ [x] 发布器接口定义                          │
│ [ ] 浏览器自动化（登录+发布）                │
│ [ ] 简单的 Web 管理界面                     │
│ [ ] 账号管理（Cookie 存储）                 │
│ [ ] 发布记录和历史                          │
└─────────────────────────────────────────────┘
```

**交付物**：
- 完成浏览器自动化集成
- 简单的 Web 界面（React/Vue）
- 支持抖音/小红书/头条三平台发布

---

### 阶段二：内容创作能力（2-3个月）

**目标**：增加 AI 辅助创作，提升内容质量

**技术选型**：

| 组件 | 方案 | 费用 |
|------|------|------|
| 文本 AI | 通义千问 / DeepSeek / Claude 免费额度 | 免费/低价 |
| 图片生成 | 通义万象免费额度 / Stable Diffusion 本地 | 免费 |
| 视频生成 | 可灵免费额度 / Vidu 试用 | 免费/低价 |

**核心功能**：

```
┌─────────────────────────────────────────────┐
│           内容创作功能清单                   │
├─────────────────────────────────────────────┤
│ [ ] 选题推荐 Agent                          │
│ [ ] 脚本/文案生成                           │
│ [ ] 图片素材生成                            │
│ [ ] 简单视频生成                            │
│ [ ] 模板库管理                              │
└─────────────────────────────────────────────┘
```

**Agent 架构（简化版）**：

```
用户输入 → 选题Agent → 内容Agent → 发布
              ↓           ↓
           热点分析    文案/图片生成
```

---

### 阶段三：批量发布和数据分析（2-3个月）

**目标**：提升效率，数据驱动优化

**核心功能**：

```
┌─────────────────────────────────────────────┐
│         批量发布和数据分析                   │
├─────────────────────────────────────────────┤
│ [ ] 批量导入内容                            │
│ [ ] 定时发布队列                            │
│ [ ] 多账号管理                              │
│ [ ] 数据统计面板                            │
│ [ ] 效果分析报告                            │
└─────────────────────────────────────────────┘
```

---

### 阶段四：SaaS 平台化（3-6个月）

**目标**：多用户、付费订阅、企业级功能

**技术升级**：

| 组件 | 升级方案 | 说明 |
|------|----------|------|
| 服务器 | 云服务器 ECS | 稳定性 |
| 数据库 | PostgreSQL 主从 | 高可用 |
| 缓存 | Redis | 性能优化 |
| 消息队列 | NATS / RabbitMQ | 异步处理 |
| 存储 | 阿里云 OSS | 可扩展 |
| 监控 | Prometheus + Grafana | 可观测性 |

**商业模式**：

```
┌─────────────────────────────────────────────┐
│              付费方案                        │
├─────────────────────────────────────────────┤
│ 免费版:  每日 3 条发布限制                   │
│ 基础版:  ¥29/月, 每日 20 条                  │
│ 专业版:  ¥99/月, 不限量 + 数据分析           │
│ 企业版:  ¥299/月, 多账号 + API 接口          │
└─────────────────────────────────────────────┘
```

---

## 三、技术架构演进

### 3.1 当前架构

```
┌──────────────────────────────────────┐
│            CLI / API 服务             │
├──────────────────────────────────────┤
│  publisher-core (接口层)              │
│  ├── interfaces (Publisher 接口)      │
│  ├── adapters (平台适配器)            │
│  ├── task (异步任务)                  │
│  └── storage (文件存储)               │
├──────────────────────────────────────┤
│           独立 CLI 工具               │
│  xiaohongshu-publisher               │
│  douyin-toutiao                      │
└──────────────────────────────────────┘
```

### 3.2 阶段一架构

```
┌─────────────────────────────────────────────────────┐
│                   Web 管理界面                       │
├─────────────────────────────────────────────────────┤
│                   API Gateway                       │
├──────────┬──────────┬──────────┬────────────────────┤
│ 账号服务 │ 内容服务 │ 发布服务 │ AI服务(可选)       │
├──────────┴──────────┴──────────┴────────────────────┤
│              publisher-core                         │
│  ┌─────────────┐  ┌─────────────┐                  │
│  │ 浏览器自动化 │  │ 任务调度器  │                  │
│  │ (rod 集成)  │  │ (异步队列)  │                  │
│  └─────────────┘  └─────────────┘                  │
├─────────────────────────────────────────────────────┤
│  SQLite → PostgreSQL    本地存储 → 对象存储        │
└─────────────────────────────────────────────────────┘
```

### 3.3 SaaS 架构

```
┌─────────────────────────────────────────────────────┐
│                   CDN + WAF                         │
├─────────────────────────────────────────────────────┤
│               负载均衡 (Nginx)                      │
├──────────┬──────────┬──────────┬────────────────────┤
│  API 服务 │ 前端服务 │ 定时任务 │ 后台Worker         │
│  (多实例) │  (SSG)  │ (Cron)   │ (消费者)           │
├──────────┴──────────┴──────────┴────────────────────┤
│  ┌─────────────────────────────────────────────┐   │
│  │              消息队列 (NATS)                 │   │
│  └─────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────┤
│  PostgreSQL    Redis    OSS    监控系统            │
└─────────────────────────────────────────────────────┘
```

---

## 四、立即需要完成的工作

### 4.1 浏览器自动化集成（优先级最高）

```go
// 需要实现的 doPublish 方法
func (a *DouyinAdapter) doPublish(ctx context.Context, content *publisher.Content) error {
    // 1. 启动浏览器
    browser := rod.New().MustConnect()
    defer browser.MustClose()

    // 2. 打开发布页面
    page := browser.MustPage(a.publishURL)

    // 3. 检查登录状态
    // ...

    // 4. 上传文件
    // ...

    // 5. 填写内容
    // ...

    // 6. 发布
    // ...
}
```

### 4.2 简单 Web 界面

技术选型：React + Tailwind CSS + Vite（免费）

```
页面清单:
- 登录页
- 仪表盘
- 账号管理
- 内容发布
- 发布历史
```

### 4.3 数据库设计

```sql
-- 用户表
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE,
    email VARCHAR(100) UNIQUE,
    password_hash VARCHAR(255),
    created_at TIMESTAMP DEFAULT NOW()
);

-- 平台账号表
CREATE TABLE platform_accounts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    platform VARCHAR(20),
    account_name VARCHAR(100),
    cookies JSONB,
    status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT NOW()
);

-- 发布任务表
CREATE TABLE publish_tasks (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    account_id INTEGER REFERENCES platform_accounts(id),
    platform VARCHAR(20),
    content_type VARCHAR(20),
    title VARCHAR(100),
    body TEXT,
    media_paths JSONB,
    tags JSONB,
    status VARCHAR(20) DEFAULT 'pending',
    scheduled_at TIMESTAMP,
    published_at TIMESTAMP,
    post_url VARCHAR(500),
    error_message TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 五、成本估算

### 免费阶段（0-6个月）

| 项目 | 方案 | 费用 |
|------|------|------|
| 开发环境 | 本地开发 | ¥0 |
| AI 服务 | 免费额度 | ¥0 |
| 数据库 | SQLite | ¥0 |
| 版本控制 | GitHub | ¥0 |
| **总计** | | **¥0** |

### 早期运营（6-12个月）

| 项目 | 方案 | 费用/月 |
|------|------|---------|
| 云服务器 | 2核4G | ¥100-200 |
| 数据库 | 云数据库基础版 | ¥100 |
| 域名 | .com | ¥10 |
| AI 服务 | 按量付费 | ¥100-300 |
| **总计** | | **¥300-600/月** |

### 盈利后的升级

当月收入稳定超过 ¥3000 后，考虑升级：
- 更高性能服务器
- 专业的 AI 服务套餐
- CDN 加速
- 监控告警系统

---

## 六、下一步行动

1. **本周**：完成浏览器自动化集成
2. **下周**：搭建简单的 Web 管理界面
3. **两周后**：实现账号管理和发布功能
4. **一个月后**：MVP 上线测试

---

**文档版本**：v1.0
**更新时间**：2026-02-15
