# MCP å¤šå¹³å°å‘å¸ƒæœåŠ¡ - å¼€å‘çŠ¶æ€

## æœ€æ–°æ›´æ–°ï¼š2026-02-18

### âœ… å·²å®ŒæˆåŠŸèƒ½

#### 1. å¹³å°æŠ½è±¡å±‚
- âœ… Platform æ¥å£å®šä¹‰ (`internal/platform/platform.go`)
- âœ… å¹³å°ç±»å‹å®šä¹‰ (`internal/platform/types.go`)
- âœ… å¹³å°ç®¡ç†å™¨ (`internal/platform/manager.go`)
- âœ… å¹³å°æ³¨å†Œè¡¨ (`internal/platform/registry.go`)

#### 2. å°çº¢ä¹¦å¹³å°
- âœ… å¹³å°é€‚é…å™¨ (`internal/xiaohongshu/adapter.go`)
- âœ… å¤ç”¨ç°æœ‰ xiaohongshu åŒ…çš„åŠŸèƒ½

#### 3. æŠ–éŸ³å¹³å°
- âœ… ç™»å½•åŠŸèƒ½ (`internal/douyin/login.go`)
  - æ£€æŸ¥ç™»å½•çŠ¶æ€
  - äºŒç»´ç ç™»å½•
  - ç­‰å¾…ç™»å½•å®Œæˆ
- âœ… å›¾æ–‡å‘å¸ƒåŠŸèƒ½ (`internal/douyin/publish.go`)
  - å›¾ç‰‡ä¸Šä¼ 
  - æ ‡é¢˜/å†…å®¹å¡«å†™
  - æ ‡ç­¾æ·»åŠ 
  - å‘å¸ƒæäº¤
- âœ… è§†é¢‘å‘å¸ƒåŠŸèƒ½
  - è§†é¢‘ä¸Šä¼ 
  - è§†é¢‘å¤„ç†ç­‰å¾…
  - ä¿¡æ¯å¡«å†™
  - å‘å¸ƒæäº¤
- âœ… å¹³å°ä¸»æ–‡ä»¶ (`internal/douyin/douyin.go`)
  - å®Œæ•´å®ç° Platform æ¥å£
  - æ”¯æŒç‚¹èµã€è¯„è®ºç­‰åŠŸèƒ½

#### 4. ä»Šæ—¥å¤´æ¡å¹³å°
- âœ… ç™»å½•åŠŸèƒ½ (`internal/toutiao/login.go`)
  - æ£€æŸ¥ç™»å½•çŠ¶æ€
  - äºŒç»´ç ç™»å½•
  - ç­‰å¾…ç™»å½•å®Œæˆ
- âœ… æ–‡ç« å‘å¸ƒåŠŸèƒ½ (`internal/toutiao/publish.go`)
  - æ ‡é¢˜/å†…å®¹å¡«å†™
  - å›¾ç‰‡ä¸Šä¼ 
  - æ ‡ç­¾æ·»åŠ 
  - å‘å¸ƒæäº¤
- âœ… è§†é¢‘å‘å¸ƒåŠŸèƒ½
  - è§†é¢‘ä¸Šä¼ 
  - è§†é¢‘å¤„ç†ç­‰å¾…
  - ä¿¡æ¯å¡«å†™
  - å‘å¸ƒæäº¤
- âœ… å¹³å°ä¸»æ–‡ä»¶ (`internal/toutiao/toutiao.go`)
  - å®Œæ•´å®ç° Platform æ¥å£
  - æ”¯æŒç‚¹èµã€è¯„è®ºã€æ”¶è—ç­‰åŠŸèƒ½

#### 5. å¤šå¹³å°æœåŠ¡
- âœ… å¤šå¹³å°æœåŠ¡ (`service_multipaltform.go`)
- âœ… å¤šå¹³å°å¤„ç†å™¨ (`handlers_multipaltform.go`)
- âœ… å¤šå¹³å°è·¯ç”± (`routes_multipaltform.go`)

#### 6. Cookies ç®¡ç†
- âœ… Cookies åŠ è½½/ä¿å­˜ (`cookies/cookies.go`)
- âœ… æ”¯æŒ JSON æ ¼å¼å­˜å‚¨

#### 7. ä¸»ç¨‹åº
- âœ… æ”¯æŒå•å¹³å°æ¨¡å¼ï¼ˆé»˜è®¤å°çº¢ä¹¦ï¼‰
- âœ… æ”¯æŒå¤šå¹³å°æ¨¡å¼ï¼ˆ`-multi` å‚æ•°ï¼‰

### ğŸš€ å¯åŠ¨æ–¹å¼

```bash
# å°çº¢ä¹¦å•å¹³å°æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
./mcp-publish.exe -headless=false

# å¤šå¹³å°æ¨¡å¼
./mcp-publish.exe -multi -headless=false
```

### ğŸ“¡ API ç«¯ç‚¹

#### å¤šå¹³å°æ¨¡å¼ API
- `GET /api/platforms` - è·å–å·²æ³¨å†Œå¹³å°åˆ—è¡¨
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `POST /api/platform/:platform/login` - å¹³å°ç™»å½•
- `GET /api/platform/:platform/check-login` - æ£€æŸ¥ç™»å½•çŠ¶æ€
- `POST /api/platform/:platform/publish` - å‘å¸ƒå›¾æ–‡
- `POST /api/platform/:platform/publish-video` - å‘å¸ƒè§†é¢‘
- `GET /api/platform/:platform/feeds` - è·å–å†…å®¹åˆ—è¡¨
- `GET /api/platform/:platform/feeds/:feed_id` - è·å–å†…å®¹è¯¦æƒ…

#### å¹³å°æ ‡è¯†
- `xiaohongshu` - å°çº¢ä¹¦
- `douyin` - æŠ–éŸ³
- `toutiao` - ä»Šæ—¥å¤´æ¡

### ğŸ“ é¡¹ç›®ç»“æ„

```
mcp-publish-platform/
â”œâ”€â”€ cookies/
â”‚   â””â”€â”€ cookies.go          # Cookies ç®¡ç†
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ douyin/
â”‚   â”‚   â”œâ”€â”€ douyin.go       # æŠ–éŸ³å¹³å°ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ login.go        # ç™»å½•åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ publish.go      # å‘å¸ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ platform/
â”‚   â”‚   â”œâ”€â”€ manager.go      # å¹³å°ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ platform.go     # å¹³å°æ¥å£
â”‚   â”‚   â”œâ”€â”€ registry.go     # å¹³å°æ³¨å†Œè¡¨
â”‚   â”‚   â””â”€â”€ types.go        # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ toutiao/
â”‚   â”‚   â”œâ”€â”€ toutiao.go      # ä»Šæ—¥å¤´æ¡å¹³å°ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ login.go        # ç™»å½•åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ publish.go      # å‘å¸ƒåŠŸèƒ½
â”‚   â””â”€â”€ xiaohongshu/
â”‚       â””â”€â”€ adapter.go      # å°çº¢ä¹¦é€‚é…å™¨
â”œâ”€â”€ main.go                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ app_server.go           # åº”ç”¨æœåŠ¡å™¨
â”œâ”€â”€ service_multipaltform.go # å¤šå¹³å°æœåŠ¡
â”œâ”€â”€ handlers_multipaltform.go # å¤šå¹³å°å¤„ç†å™¨
â””â”€â”€ routes_multipaltform.go  # å¤šå¹³å°è·¯ç”±
```

### ğŸ”„ åç»­ä¼˜åŒ–å»ºè®®

1. **åŠŸèƒ½å¢å¼º**
   - [ ] æ·»åŠ å®šæ—¶å‘å¸ƒåŠŸèƒ½
   - [ ] æ·»åŠ è‰ç¨¿ä¿å­˜åŠŸèƒ½
   - [ ] æ·»åŠ æ‰¹é‡å‘å¸ƒåŠŸèƒ½

2. **å¹³å°æ‰©å±•**
   - [ ] æ·»åŠ å¾®åšå¹³å°æ”¯æŒ
   - [ ] æ·»åŠ  B ç«™å¹³å°æ”¯æŒ
   - [ ] æ·»åŠ çŸ¥ä¹å¹³å°æ”¯æŒ

3. **ç¨³å®šæ€§ä¼˜åŒ–**
   - [ ] æ·»åŠ é‡è¯•æœºåˆ¶
   - [ ] æ·»åŠ é”™è¯¯æ¢å¤
   - [ ] æ·»åŠ æ—¥å¿—è®°å½•

4. **æ€§èƒ½ä¼˜åŒ–**
   - [ ] æµè§ˆå™¨å®ä¾‹å¤ç”¨
   - [ ] å¹¶å‘å‘å¸ƒæ”¯æŒ
   - [ ] ç¼“å­˜æœºåˆ¶
